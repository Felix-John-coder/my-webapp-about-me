name: upload to s3
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  workflow_dispatch:
    
permissions:
  id-token: write  
  contents: read

jobs:
    deploy:
      runs-on: ubuntu-latest
      steps:
        - name: take a copy of my src code
          uses: actions/checkout@v4
        
        - name: Configure AWS credentials (OIDC)
          uses: aws-actions/configure-aws-credentials@v5
          with:
            role-to-assume: arn:aws:iam::862479276433:role/github-role
            aws-region: eu-north-1
        - name: deploying repo to s3 serverless hosting
          run: aws s3 cp ./ s3://my-webapp-aws-felix --recursive
